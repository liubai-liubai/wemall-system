# 微信小程序商城系统 - 项目结构说明

## 项目概述

本项目采用微服务架构，包含三个主要模块：

1. **mall-api** - 后端API服务 (腾讯云函数)
2. **mall-admin** - 后台管理前端 (Vue3 + TypeScript)
3. **mall-miniprogram** - 微信小程序前端 (uni-app)

## 项目目录结构

```
wemall-system/
├── 📁 mall-api/                       # 后端API服务
│   ├── src/                           # 源码目录
│   │   ├── controllers/               # 控制器，负责请求处理
│   │   ├── services/                  # 业务逻辑层
│   │   ├── models/                    # 数据模型
│   │   ├── middleware/                # 中间件
│   │   ├── utils/                     # 工具函数
│   │   ├── config/                    # 配置文件
│   │   └── types/                     # TypeScript类型定义
│   ├── prisma/                        # 数据库Schema和迁移
│   ├── tests/                         # 测试文件
│   ├── .env.example                   # 环境变量模板
│   ├── serverless.yml                 # 腾讯云函数配置
│   ├── package.json
│   └── tsconfig.json
├── 📁 mall-admin/                     # 后台管理前端
│   ├── src/                           # 源码目录
│   │   ├── api/                       # API接口封装
│   │   ├── assets/                    # 静态资源
│   │   ├── components/                # 通用组件
│   │   ├── layout/                    # 布局组件
│   │   ├── router/                    # 路由配置
│   │   ├── store/                     # Pinia状态管理
│   │   ├── utils/                     # 工具函数
│   │   ├── views/                     # 页面组件
│   │   │   ├── system/                # 系统管理
│   │   │   ├── mall/                  # 商城管理
│   │   │   └── dashboard/             # 仪表盘
│   │   ├── App.vue                    # Vue主组件
│   │   └── main.ts                    # Vue应用入口
│   ├── public/                        # 公共资源
│   ├── vite.config.ts                 # Vite构建配置
│   ├── package.json
│   └── tsconfig.json
├── 📁 mall-miniprogram/               # 微信小程序前端
│   ├── pages/                         # 页面目录
│   │   ├── index/                     # 首页
│   │   ├── category/                  # 分类页
│   │   ├── product/                   # 商品详情
│   │   ├── cart/                      # 购物车
│   │   ├── order/                     # 订单相关
│   │   └── user/                      # 用户中心
│   ├── components/                    # 组件目录
│   │   ├── common/                    # 通用组件
│   │   ├── product/                   # 商品组件
│   │   └── order/                     # 订单组件
│   ├── static/                        # 静态资源
│   ├── utils/                         # 工具函数
│   ├── store/                         # 状态管理
│   ├── manifest.json                  # uni-app应用配置
│   ├── pages.json                     # 页面路由配置
│   ├── App.vue                        # uni-app主组件
│   └── package.json
├── 📁 docs/                           # 项目文档
│   ├── 01-项目规划/                   # 项目规划文档
│   │   ├── 开发计划.md                # 开发计划和进度
│   │   └── 项目结构说明.md            # 项目结构说明(本文档)
│   ├── 02-系统设计/                   # 系统设计文档
│   │   ├── 系统设计方案.md            # 系统架构设计
│   │   ├── 数据库设计.md              # 数据库设计文档
│   │   └── API接口文档.md             # API接口文档
│   ├── 03-开发指南/                   # 开发指南
│   │   ├── 代码规范配置.md            # 代码规范和工具配置
│   │   ├── 环境搭建指南.md            # 开发环境搭建
│   │   └── 常见问题FAQ.md             # 开发过程常见问题
│   ├── 04-部署运维/                   # 部署运维文档
│   │   ├── 部署文档.md                # 部署说明文档
│   │   ├── 监控配置.md                # 系统监控配置
│   │   └── 备份恢复.md                # 数据备份和恢复
│   └── 05-用户手册/                   # 用户使用手册
│       ├── 管理后台使用手册.md        # 后台操作说明
│       └── 小程序功能说明.md          # 小程序功能介绍
├── 📁 database/                       # 数据库相关(补充Prisma功能)
│   ├── migrations/                    # 手动数据库迁移脚本
│   ├── seeds/                         # 初始化数据脚本
│   └── backup/                        # 数据库备份脚本和文件
├── 📁 deploy/                         # 部署配置
│   ├── docker/                        # Docker容器配置
│   │   ├── api.Dockerfile             # API服务容器配置
│   │   ├── admin.Dockerfile           # 管理后台容器配置
│   │   └── docker-compose.yml         # 容器编排配置
│   ├── nginx/                         # Nginx反向代理配置
│   │   ├── api.conf                   # API服务代理配置
│   │   └── admin.conf                 # 管理后台配置
│   └── scripts/                       # 部署脚本
│       ├── deploy-api.sh              # API服务部署脚本
│       ├── deploy-admin.sh            # 管理后台部署脚本
│       └── setup.sh                   # 环境初始化脚本
├── 📁 .git/                           # Git版本控制
├── 📁 .husky/                         # Git钩子配置
├── 📁 .cursor/                        # Cursor IDE开发工具配置
├── 📁 node_modules/                   # 依赖包目录
├── 📄 package.json                    # Workspace根配置(monorepo)
├── 📄 package-lock.json               # 依赖版本锁定文件
├── 📄 tsconfig.json                   # TypeScript全局配置
├── 📄 .eslintrc.js                    # ESLint代码规范配置
├── 📄 .prettierrc.js                  # Prettier代码格式化配置
├── 📄 commitlint.config.js            # Git提交信息规范配置
├── 📄 .gitignore                      # Git忽略文件配置
├── 📄 .gitattributes                  # Git属性配置
├── 📄 .nvmrc                          # Node.js版本锁定文件
├── 📄 .editorconfig                   # 编辑器配置统一
├── 📄 .env.example                    # 环境变量配置说明
├── 📄 LICENSE                         # 开源许可证文件
├── 📄 CHANGELOG.md                    # 版本变更记录
├── 📄 CONTRIBUTING.md                 # 项目贡献指南
└── 📄 README.md                       # 项目说明文档
```

## 技术栈总览

### 后端API (mall-api)

- **运行环境**: 腾讯云函数SCF (Node.js 18.x)
- **开发语言**: TypeScript
- **Web框架**: Koa.js
- **ORM**: Prisma
- **数据库**: 腾讯云MySQL 8.0
- **缓存**: 腾讯云Redis
- **身份验证**: JWT + 微信授权
- **文档**: Swagger/OpenAPI

### 后台管理 (mall-admin)

- **框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **UI库**: Element Plus
- **状态管理**: Pinia
- **路由**: Vue Router 4
- **HTTP客户端**: Axios
- **图表**: ECharts

### 小程序前端 (mall-miniprogram)

- **框架**: uni-app
- **UI库**: uView UI 2.0
- **状态管理**: Pinia
- **跨端支持**: 微信小程序、H5、App

## 开发流程

### 1. 环境准备

```bash
# 安装依赖
npm install

# 配置数据库
cd mall-api
npx prisma migrate dev

# 启动后端API开发服务
npm run dev

# 启动管理后台
cd ../mall-admin
npm run dev

# 启动小程序开发
cd ../mall-miniprogram
npm run dev:mp-weixin
```

### 2. 开发规范

- 代码规范：ESLint + Prettier
- 提交规范：Conventional Commits
- 分支策略：Git Flow
- 测试要求：单元测试覆盖率 > 80%

### 3. 部署流程

- **API服务**: 通过Serverless Framework部署到腾讯云函数
- **管理后台**: 打包后部署到腾讯云COS + CDN
- **小程序**: 通过微信开发者工具发布

## 核心功能模块

### 系统管理

- 用户管理、角色管理、菜单管理
- 部门管理、权限控制
- 操作日志、登录日志
- 通知公告、系统配置

### 商城功能

- 商品管理 (SPU/SKU)
- 订单管理、支付集成
- 营销活动 (优惠券、秒杀、拼团)
- 会员体系、积分系统
- 分销功能

### 基础设施

- 代码生成器
- 文件上传服务
- 监控告警
- 数据备份

## 性能特性

### 高性能

- Redis缓存热点数据
- CDN加速静态资源
- 数据库查询优化
- 接口响应缓存

### 高可用

- 云函数自动扩缩容
- 数据库主从复制
- 多地域部署
- 健康检查和故障转移

### 安全性

- JWT身份验证
- API接口鉴权
- 数据传输加密
- SQL注入防护

## 监控体系

### 应用监控

- API调用统计
- 错误率监控
- 响应时间监控
- 业务指标监控

### 基础设施监控

- 服务器性能监控
- 数据库性能监控
- 缓存命中率监控
- CDN访问统计

这个架构设计充分考虑了微信小程序商城的特点，采用现代化的技术栈，具备良好的扩展性和维护性，能够满足高并发场景下的业务需求。
